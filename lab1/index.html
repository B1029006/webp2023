<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjc" crossorigin="anonymous">
</head>

<body>
    <div id="container" tabindex="0" class="blockquote text-nowrap"></div>
    <script>
        const container = document.getElementById('container');
        let randChar = add_new_chars();

        window.onload = function () {
            container.textContent = randChar + container.textContent.substring(randChar.length);
        }

        function add_new_chars() {
            var newChars = "";
            const n = Math.floor(Math.random() * 3) + 1;
            for (var i = 0; i < n; i++) {
                const ranNum = Math.floor(Math.random() * 26);
                newChars += String.fromCharCode(65 + ranNum);
            }
            return newChars;
        }



        window.addEventListener("keyup", function (e) {
            console.log(e.key);
            let key = e.key.replace(/\s+/g, '');
            if (e.key === 'Escape') {
                container.textContent = "";
            }
            else if (e.key === 'Backspace') {
                const str = container.textContent;
                container.textContent = str.substring(0, str.length - 1);
            }
            else if (container.textContent.length > 0 && e.key.toUpperCase() === container.textContent.charAt(0).toUpperCase()) {
                container.textContent = container.textContent.substring(1);
                if (container.textContent.length === 0) {
                    add_new_char();
                }
                else {
                    add_new_char();
                    while (e.key.toUpperCase() === container.textContent.charAt(0).toUpperCase()) {
                        container.textContent = container.textContent.substring(1);
                        add_new_char();
                    }
                }
            }

            else {
                container.textContent += e.key;
            }
        });

        function add_new_char() {
            const newChars = add_new_chars();
            randChar += newChars;
            container.textContent += newChars.trim();
        }



    </script>
</body>

</html>
